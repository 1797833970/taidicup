# 生产线故障自动识别与人员配置系统

## 📁 项目简介
本项目是针对2024年（第12届）"泰迪杯"数据挖掘挑战赛A题的解决方案，专注于生产线的故障自动识别与人员配置优化。通过机器学习技术，实现对生产线故障的准确预测和分类，为工业生产的稳定运行提供保障。

## 🏆 赛题背景
详细赛题说明请查看：[📄 赛题说明文档](A题-生产线的故障自动识别与人员配置.pdf)

数据获取：[2024年（第12届）"泰迪杯"数据挖掘挑战赛](https://www.tipdm.org:10010/#/competition/1734744522337984512/question)

## 📂 目录结构
```
taidicup/
├── question1/           # 问题一相关文件
│   ├── build_model.ipynb     # 模型构建与训练
│   ├── creative_model.ipynb  # 创新模型(经验学习&增量学习)实现
│   ├── data_process.ipynb    # 数据预处理
│   └── 问题一.md            # 问题一详细说明
├── question2/           # 问题二相关文件
│   ├── statistics.ipynb      # 问题二主实现
│   └── 问题二.md            # 问题二详细说明
├── question3/           # 问题三相关文件
│   ├── analysis.ipynb        # 分析实现
│   ├── 生产线可视化分析.pdf     # 可视化分析报告
│   └── 问题三.md            # 问题三详细说明
├── src/                # 资源文件
├── .gitignore          # Git忽略文件
├── A题-生产线的故障自动识别与人员配置.pdf  # 赛题说明文档
├── README.md           # 项目说明文档
└── requirements.txt    # 依赖文件
```

## 🎯 核心功能

### 1. 数据预处理
- **故障状态编码**：将故障列映射到唯一编码，正常状态为0
- **特征融合**：合并气缸/定位器状态，生成新特征
- **特征构建**：构造具有物理含义的新特征，如各阶段执行一致性
- **Duration特征**：按状态变化生成持续时间特征，捕捉状态持续信息
- **样本去重**：故障样本全部保留，正常样本根据关键特征去重

### 2. 模型构建
- **基模型**：随机森林（RF）、XGBoost、CatBoost
- **集成学习**：
  - Soft Voting：多模型概率加权融合
  - Stacking：多层模型堆叠
- **创新方案**：
  - 经验学习（Experience Learning）：利用旧模型预测结果作为新特征
  - 增量学习（Incremental Learning）：在已有模型基础上继续训练

### 3. 评估指标
- **总体准确率（Accuracy）**
- **报警准确率（Warning Accuracy）**
- **故障准确率（Fault Accuracy）**
- **单类别召回率（Recall）**

### 4. 故障自动报警统计
- **报警信息生成**：输出故障报警的日期、开始时间与持续时长
- **平滑处理**：
  - 短时故障剔除：修正极短故障段为正常状态
  - 段内少数值修正：保证同一故障段的连续性和一致性
- **结果优化**：提高预测结果的合理性，减少假阳性故障判定

### 5. 可视化分析
- **相关性分析**：通过热力图分析产量、合格率、工龄与故障的关系
- **分布分析**：使用箱线图分析不同生产线、不同工龄人员的产量与合格率分布
- **趋势分析**：通过折线图展示各生产线产量、故障发生次数与持续时间的变化趋势
- **关联分析**：利用散点图分析故障发生时间与次品出现时间的对应关系
- **构成分析**：通过堆叠图分析不同工龄下各类故障持续时间的构成情况
- **回归分析**：构建多元线性回归模型，分析各因素对产量和合格率的影响

## 📊 实验结果

### 基模型性能对比
| 模型 | Accuracy (%) | Warning Accuracy (%) | Fault Accuracy (%) |
|------|--------------|----------------------|--------------------|
| XGBoost | 99.979 | 99.984 | 98.702 |
| CatBoost | 99.975 | 99.979 | 98.994|
| RF | 99.970 | 99.980 | 98.500 |

### 集成模型性能
| 模型          | Accuracy (%) | Warning_Accuracy (%) | Fault_Accuracy (%) |
| ----------- | ------------ | -------------------- | ------------------ |
| Soft Voting | 99.983       | 99.986               | 99.310             |
| Stacking    | 99.986       | 99.989               | 99.219             |

### 创新方案性能
| 模型   | Accuracy (%) | Warning_Accuracy (%) | Fault_Accuracy (%) |
| ---- | ------------ | -------------------- | ------------------ |
| 增量学习 | 99.984       | 99.991               | 97.387             |
| 经验学习 | 99.977       | 99.983               | 97.722             |

### 问题二平滑处理效果
| 模型    | Accuracy（%） | Warning_Accuracy（%） | Fault_Accuracy（%） |
| ------- | ------------- | --------------------- | ------------------- |
| 未平滑处理 | 99.983        | 99.986                | 99.310              |
| 平滑处理  | 99.981        | 99.989                | 99.356              |

## 🚀 如何运行

### 环境要求
- Python 3.8
- Jupyter Notebook

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行步骤
1. **数据预处理**：运行 `question1/data_process.ipynb` 处理原始数据
2. **模型训练**：运行 `question1/build_model.ipynb` 训练基模型和集成模型
3. **创新方案**：运行 `question1/creative_model.ipynb` 实现经验学习和增量学习
4. **故障报警统计**：运行 `question2/statistics.ipynb` 实现故障自动报警统计和平滑处理
5. **可视化分析**：运行 `question3/analysis.ipynb` 实现生产线、人员与故障的可视化分析

## 💡 技术亮点

1. **多模型集成**：结合多种机器学习模型优势，提高预测准确率
2. **特征工程**：构建具有物理含义的特征，提升模型性能
3. **类别不平衡处理**：采用SMOTE过采样和欠采样相结合的策略
4. **创新学习方法**：提出经验学习和增量学习方案，进一步优化模型性能
5. **平滑处理技术**：通过短时故障剔除和段内少数值修正，提高预测结果的合理性
6. **故障报警统计**：实现故障自动即时报警，生成格式化的报警信息
7. **可视化分析**：多维度可视化分析生产线、人员与故障的关系，为生产管理提供数据支持
8. **统计建模**：通过多元线性回归模型量化各因素对产量和合格率的影响

## 🤝 致谢
感谢泰迪杯组委会提供的竞赛平台和数据集
---
*本项目为2024年"泰迪杯"数据挖掘挑战赛参赛作品，专注于生产线故障自动识别与人员配置优化。*